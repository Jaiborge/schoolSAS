<main>

  
  
  <ng-container  *ngIf="(appState$ | async ) as appState" [ngSwitch]="appState.dataState"  >
    <ng-container *ngSwitchCase="DataState.LOADING_STATE" > 
  <section class="section section-shaped section-lg">
    <div class="shape shape-style-1 bg-gradient-default">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
  
    <div class="container pt-lg-md">
      <div class="row justify-content-center">
        <div class="col-lg-5">
          <div class="card bg-secondary shadow border-0">
            <div class="card-header bg-white pb-1">
              <div class="text-muted text-center mb-1">
                <h5 class="title mb-5">Reporte de ordenes pagadas</h5>
              </div>
             
            </div>
            

            <div class="card-body px-lg-5 py-lg-5">
              <form #orderForm="ngForm" (ngSubmit)="retrieveOrders(orderForm)"  role="form">
                <div class="form-group" [ngClass]="{'focused':focus===true}">
                  <div class="input-group input-group-alternative mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i class="ni ni-hat-3"></i></span>
                    </div>
                    <input class="form-control" ngModel placeholder="Numero de referencia" type="text" (focus)="focus=true" name="reference" (blur)="focus=false" required>
                  </div>
                </div>
                <div class="text-center">
                  <button type="submit" class="btn btn-primary mt-4"   [disabled]="orderForm.invalid || (isLoading$ | async)">
                    <span>  BUSCAR</span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </section>
</ng-container>
  
  <ng-container *ngSwitchCase="DataState.LOADED_STATE" >      
  <section>
    
    <div class="wrapper">
      
      <section class="section tables-2 mb-5"><div class="container-fluid">
          <div class="row">
            <div class="col-md-6 mx-auto text-center">
              <h2 class="title mb-5">Reporte de ordenes pagadas</h2>
            </div>
          </div>
          <div class="row">
            <div class="col-md-10 mx-auto">
              <div>
                <div class="table-responsive mb-0">
                  <table class="table table-pricing">
                    
                    <thead class="text-primary">
                    <tr><th>
                          <img class="background" src="https://app.creative-tim.com/argon_placeholder/ill/bg4-1.svg"></th>
                        <th class="text-center">
                          <h5 class="card-title">PERIODO</h5>
                          <a class="btn btn-info btn-sm" href="javascript:void(0)">RANGO CUBIERTO</a><a href="javascript:void(0)"></a>
                        </th>
                        <th class="text-center">
                          <h5 class="card-title">MONTO</h5>
                          <a class="btn btn-info btn-sm" href="javascript:void(0)">CANTIDAD PAGADA</a><a href="javascript:void(0)"></a>
                        </th>
                        <th class="text-center">
                          <h5 class="card-title">FECHA DE PAGO</h5>
                          <a class="btn btn-info btn-sm" href="javascript:void(0)">FEcha de transaccion</a><a href="javascript:void(0)"></a>
                        </th>
                      </tr>
                      <tr class="bg-primary">
                        <td class="text-white"><b>ID REFERENCIA</b></td>
                        <td></td>
                        <td></td>
                        <td></td>
                      </tr>
                    </thead>
                    
                    <tbody  *ngFor= "let order of appState.appData.data.Orders; let i = index">
                      
                      <tr><td>{{order.reference}} <i class="ni ni-compass-04 ml-1"></i></td>
                        <td class="text-center">{{order.period}}</td>
                        <td class="text-center">{{order.amount | currency}}</td>
                        <td class="text-center">{{order.paymentDate | date}}</td>
                      </tr>
                      
                     
                    </tbody>
                    </table></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    
    </div>
  




  </section>
</ng-container>
</ng-container>

</main>
